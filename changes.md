# Change Log

- Updated `.gitignore` to ignore workspace build artifacts and node modules for clean status.
- Declared `react-router-dom` as a peer dependency in `packages/ui/package.json` so shared components resolve router imports.
- Added matching dev dependencies in `packages/ui/package.json` to support local builds with `react-router-dom`.
- Introduced a post-signup welcome screen in `apps/senior-pwa/src/pages/Signup.jsx` and adjusted routing so the confirmation message appears before redirecting home.
- Added \checklist.md\ (backend root) listing every API endpoint for tracking coverage.

- Senior PWA now triggers /auth/logout on sign-out (updated apps/senior-pwa/src/services/auth.js, apps/senior-pwa/src/contexts/AuthContext.jsx, and apps/senior-pwa/src/pages/Home.jsx).

- Senior PWA auth module/context now support token refresh, `/users/me` hydration, and expiry-aware persistence.
- Senior PWA trails views now call live APIs for listings, registrations, and confirmed trails (new apps/senior-pwa/src/services/trails.js, updated apps/senior-pwa/src/pages/Home.jsx and apps/senior-pwa/src/pages/MyTrails.jsx).
- Trail detail, join/cancel UI, and registration status lookup added but backend session cleanup still unstable (in progress; see trails-activities-svc/app/db.py).
- Senior PWA trail detail page now memoizes its refresh handler without trail-state churn and tracks first-load with a ref, preventing the view from spamming `GET /users/me/registrations`/`GET /trails/:id` while open.
- Senior PWA scan experience now calls the QR check-in service for live scans, manual token entry, and history (`apps/senior-pwa/src/services/checkins.js`, `apps/senior-pwa/src/pages/Scan.jsx`, reusing `components/QRScanner.jsx`).
- Updated backend `checklist.md` to mark `GET /checkin/users/me` as implemented and note that `POST /checkin/scan` still needs end-to-end camera verification.
- Senior PWA rewards screen now fetches live points, vouchers, and redemption history via points service (new `src/services/points.js`, updated `src/pages/Rewards.jsx`).
- Updated checklist entries for points/voucher attendee APIs to "!" to indicate pending organiser-driven testing.
- Senior PWA now consumes leaderboard & attendance services (new `src/services/leaderboard.js`, updated `src/pages/Leaderboard.jsx` and `src/pages/MyTrails.jsx`).
- Added organiser dashboard auth context, organiser login page, and `organiserLogin` service consuming /auth/organisers/login.
- Added organiser test account (username admin) and marked /auth/organisers login/signup as implemented.
- Split API checklist into Senior PWA vs Organiser Dashboard sections with endpoint coverage.
- Reworked checklist into service-by-service matrix showing Senior PWA vs Organiser Dashboard coverage.
- Organiser dashboard auth context now refreshes tokens, hydrates profile via /users/me, and calls /auth/logout.
- Updated organiser UI button helper and layout to remove React warnings and hydration mismatches.
- Organizer dashboard Manage Trails view now consumes live Trails & Activities APIs for listing, creation, editing, attendee rosters, status workflows, manual enrolment, and invite minting.
- Trails & Activities backend now respects requested initial status, restricts `/trails` listings to authenticated roles, and serves paginated attendee payloads (updated `app/routers/trails.py`, `app/schemas.py` plus new tests in `tests/test_trails_service.py`).
- Organiser dashboard trail services now understand paginated rosters and optional status on create (updated `apps/organizer-dashboard/src/services/trails.ts`).
- Manage Trails client adds paginated roster loading, richer metrics, invite copy polish, and reuses the new pagination helpers (`apps/organizer-dashboard/src/app/manageTrails/page.tsx`).
- Organizer dashboard now covers the remaining Trails & Activities interactions: trail detail hydration, attendee lookups, invite preview/acceptance, and organiser participation summaries (updated `apps/organizer-dashboard/src/services/trails.ts` and `apps/organizer-dashboard/src/app/manageTrails/page.tsx`).
- Organiser dashboard now has client wrappers for leaderboard and attendance APIs, enabling system/org rankings and roster views (`apps/organizer-dashboard/src/services/leaderboard.ts`).
- Insights page now surfaces live system and organisation leaderboards plus per-trail attendance using the new services (`apps/organizer-dashboard/src/app/insights/page.tsx`).
- Senior PWA shows an organisation assignment banner for unassigned users and treats cancelled registrations as rejoinable (updated `apps/senior-pwa/src/pages/Home.jsx`, `MyTrails.jsx`, and `TrailDetail.jsx`).
- Organiser dashboard reuses NRIC lookups across attendee status checks and points adjustments, including participant context in results (`apps/organizer-dashboard/src/app/manageTrails/page.tsx`, `src/app/points/page.tsx`, `src/services/auth.ts`).
- Points dashboard now lists organisation-wide balances with search and pagination, powered by new client helpers (`apps/organizer-dashboard/src/app/points/page.tsx`, `src/services/points.ts`).
- Manage Trails roster and registration tables now surface participant names, NRICs, and IDs using a cached attendee directory, and related alerts reference friendly identifiers (`apps/organizer-dashboard/src/app/manageTrails/page.tsx`).
- Organizer dashboard navigation now links directly to the points workspace (`apps/organizer-dashboard/src/app/layout.tsx`).
- Points workspace now resolves participant names/NRICs for balances and ledger entries using the shared attendee directory cache (`apps/organizer-dashboard/src/app/points/page.tsx`).
- Organiser dashboard ledger view now surfaces organisation-wide transactions with participant IDs, error messaging, and load-more controls (apps/organizer-dashboard/src/app/points/page.tsx).
- Senior PWA auth context periodically re-fetches /users/me so new organisation assignments appear without a manual relog (apps/senior-pwa/src/contexts/AuthContext.jsx).
- Senior PWA home screen now lets seniors redeem organiser invite codes with live preview and trail enrollment (`apps/senior-pwa/src/services/trails.js`, `apps/senior-pwa/src/pages/Home.jsx`).
